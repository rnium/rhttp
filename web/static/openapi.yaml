openapi: 3.0.3
info:
  title: rHttpbin
  summary: A httpbin clone in Custom Go HTTP Server
  contact:
    name: MSI Rony
    email: abrony@gmail.com
    url: https://sirony.site
  version: 1.0.0
  description: This is a simple httpbin clone implemented in a custom Go HTTP server. It demonstrates various HTTP features and their responses.
tags:
  - name: HTTP Methods
    description: Endpoints demonstrating various HTTP methods
  - name: Request Inspection
    description: Endpoints for inspecting request data
  - name: Response Inspection
    description: Endpoints for inspecting response data
  - name: Dynamic Data
    description: Generate random and dynamic data
  - name: Images
    description: Endpoints returning image data
  - name: Cookies
    description: Create, read and delete cookies

paths:
  /get:
    get:
      summary: Simple GET Request
      description: Returns a simple GET response
      tags:
        - HTTP Methods
      responses:
        "200":
          description: Successful GET response
          content:
            application/json:
              schema:
                type: string
              example: "This is a GET request"
  /post:
    post:
      summary: Simple POST Request
      description: Returns a simple POST response
      tags:
        - HTTP Methods
      responses:
        "200":
          description: Successful POST response
          content:
            application/json:
              schema:
                type: string
              example: "This is a POST request"
  /put:
    put:
      summary: Simple PUT Request
      description: Returns a simple PUT response
      tags:
        - HTTP Methods
      responses:
        "200":
          description: Successful PUT response
          content:
            application/json:
              schema:
                type: string
              example: "This is a PUT request"
  /delete:
    delete:     
      summary: Simple DELETE Request
      description: Returns a simple DELETE response
      tags:
        - HTTP Methods
      responses:
        "200":
          description: Successful DELETE response
          content:
            application/json:
              schema:
                type: string
              example: "This is a DELETE request"
  /patch:
    patch:
      summary: Simple PATCH Request
      description: Returns a simple PATCH response
      tags:
        - HTTP Methods
      responses:
        "200":
          description: Successful PATCH response  
          content:
            application/json:
              schema:
                type: string
              example: "This is a PATCH request"
  /headers:
    get:
      summary: Request headers
      description: Returns the request headers received by the server
      tags:
        - Request Inspection
      responses:
        "200":
          description: Successful response containing headers
          content:
            application/json:
              schema:
                type: object
              example:
                Accept: "*/*"
                Host: "example.org"
                User-Agent: "curl/7.64.1"
  /ip:
    get:
      summary: Client IP
      description: Returns the client's IP address as seen by the server
      tags:
        - Request Inspection
      responses:
        "200":
          description: Successful response containing client IP
          content:
            application/json:
              schema:
                type: object
                properties:
                  origin:
                    type: string
              example:
                origin: "203.0.113.195"
  /user-agent:
    get:
      summary: User-Agent
      description: Returns the request User-Agent header
      tags:
        - Request Inspection
      responses:
        "200":
          description: Successful response containing the User-Agent
          content:
            application/json:
              schema:
                type: object
              example:
                user-agent: "curl/7.64.1"
  /cache:
    get:
      summary: Returns a 304 if an If-Modified-Since header or If-None-Match is present. Returns the same as a GET otherwise.
      description: Returns cache-related headers and information
      tags:
        - Response Inspection
      parameters:
        - name: If-Modified-Since
          in: header
          schema:
            type: string
            format: date-time
        - name: If-None-Match
          in: header
          schema:
            type: string
      responses:
        "200":
          description: Cache info
          content:
            application/json:
              schema:
                type: object
              example:
                cache-control: "max-age=3600"
  /cache/{value}:
    get:
      summary: Sets a Cache-Control header for n seconds.
      description: Sets a cache value (in seconds) and returns appropriate cache headers
      tags:
        - Response Inspection
      parameters:
        - name: value
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
          description: Cache duration in seconds
      responses:
        "200":
          description: Cache set
          content:
            application/json:
              schema:
                type: object
              example:
                cache-control: "max-age=60"
  /etag/{etag}:
    get:
      summary: Responds to If-None-Match and If-Match headers appropriately.
      description: Returns an ETag header and handles conditional requests
      tags:
        - Response Inspection
      parameters:
        - name: etag
          in: path
          schema:
            type: string
          description: The ETag value to be returned
        - name: If-None-Match
          in: header
          schema:
            type: string
        - name: If-Match
          in: header
          schema:
            type: string
      responses:
        "200":
          description: Normal Response
        "304":
          description: Not Modified
        "412":
          description: Precondition Failed
  /response-headers:
    get:
      summary: Returns a set of response headers from the query string.
      description: Returns custom headers specified as query parameters
      tags:
        - Response Inspection
      parameters:
        - name: freeform
          in: query
          schema:
            type: string
          description: Custom header to include in the response (can be repeated)
      responses:
        "200":
          description: Response with custom headers
    post:
      summary: Custom Response Headers via POST
      description: Returns custom headers specified as query parameters
      tags:
        - Response Inspection
      parameters:
        - name: freeform
          in: query
          schema:
            type: string
          description: Custom header to include in the response (can be repeated)
      responses:
        "200":
          description: Response with custom headers
  /base64/{value}:
    get:
      summary: Decodes the provided base64 string and returns the decoded value
      tags:
        - Dynamic Data
      parameters:
        - name: value
          in: path
          required: true
          default: "ckh0dHBiaW4gaXMgYXdlc29tZQ=="
          schema:
            type: string
          description: Base64 encoded string
      responses:
        "200":
          description: Decoded string
          content:
            text/plain:
              schema:
                type: string
              example: "Hello, World!"
  /uuid:
    get:
      summary: Generates and returns a random UUID
      tags:
        - Dynamic Data
      responses:
        "200":
          description: Generated UUID
          content:
            application/json:
              schema:
                type: object
                properties:
                  uuid:
                    type: string
              example:
                uuid: "123e4567-e89b-12d3-a456-426614174000"
  /bytes/{n}:
    get:
      summary: Returns n random bytes
      tags:
        - Dynamic Data
      parameters:
        - name: n
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
          description: Number of random bytes to return (1-102400)
      responses:
        "200":
          description: Random bytes
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /delay/{delay}:
    get:
      summary: Delays responding for a specified number of seconds (Max 10 seconds)
      tags:
        - Dynamic Data
      parameters:
        - name: delay
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 10
          description: Number of seconds to delay the response (0-10)
      responses:
        "200":
          description: Delayed response
          content:
            application/json:
              schema:
                type: object
    post:
      summary: Delays responding for a specified number of seconds (Max 10 seconds)
      tags:
        - Dynamic Data
      parameters:
        - name: delay
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 10
          description: Number of seconds to delay the response (0-10)
      responses:
        "200":
          description: Delayed response
          content:
            application/json:
              schema:
                type: object
    put:
      summary: Delays responding for a specified number of seconds (Max 10 seconds)
      tags:
        - Dynamic Data
      parameters:
        - name: delay
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 10
          description: Number of seconds to delay the response (0-10)
      responses:
        "200":
          description: Delayed response
          content:
            application/json:
              schema:
                type: object
    patch:
      summary: Delays responding for a specified number of seconds (Max 10 seconds)
      tags:
        - Dynamic Data
      parameters:
        - name: delay
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 10
          description: Number of seconds to delay the response (0-10)
      responses:
        "200":
          description: Delayed response
          content:
            application/json:
              schema:
                type: object
    delete:
      summary: Delays responding for a specified number of seconds (Max 10 seconds)
      tags:
        - Dynamic Data
      parameters:
        - name: delay
          in: path
          required: true
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 10
          description: Number of seconds to delay the response (0-10)
      responses:
        "200":
          description: Delayed response
          content:
            application/json:
              schema:
                type: object
  /drip:
    get:
      summary: Drip data over a duration after an optional initial delay
      tags:
        - Dynamic Data
      parameters:
        - name: duration
          in: query
          required: true
          schema:
            type: integer
            format: float
            minimum: 1
          description: Total duration in seconds to drip the data
        - name: numbytes
          in: query
          required: true
          schema:
            type: integer
            format: int32
            minimum: 1
          description: Total number of bytes to drip
        - name: delay
          in: query
          schema:
            type: integer
            format: float
            minimum: 0
          description: Initial delay in seconds before starting to drip data        
        - name: code
          in: query
          default: 200
          schema:
            type: integer
            format: int32
            minimum: 100
            maximum: 599
          description: HTTP status code to return 
      responses:
        "200":
          description: Dripped data response
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /stream/{n}:
    get:
      summary: Streams n JSON responses
      tags:
        - Dynamic Data
      parameters:
        - name: n
          in: path
          required: true
          schema:
            type: integer
          description: Number of JSON ressponses to stream (with 100ms delay between each)
      responses:
        "200":
          description: Streamed JSON responses
          content:
            application/json:
              schema:
                type: object
  /cookies:
    get:
      summary: Returns the cookies sent in the request
      description: Returns all cookies received in the request
      tags:
        - Cookies
      responses:
        "200":
          description: Cookies received
          content:
            application/json:
              schema:
                type: object
              example:
                cookies:
                  sessionid: "abc123"
                  theme: "dark"
  /cookies/set:
    get:
      summary: Sets cookie(s) via query parameters
      description: Sets one or more cookies based on query parameters
      tags:
        - Cookies
      parameters:
        - name: freeform
          in: query
          schema:
            type: string
          description: Cookie to set
      responses:
        "200":
          description: Cookies set
          content:
            application/json:
              schema:
                type: object
              example:
                cookies:
                  sessionid: "abc123"
                  theme: "dark"
  /cookies/delete:
    get:
      summary: Deletes cookie(s) via query parameters
      description: Deletes one or more cookies based on query parameters
      tags:
        - Cookies
      parameters:
        - name: freeform
          in: query
          schema:
            type: string
          description: Cookie to delete
      responses:
        "200":
          description: Redirected to cookie list after deletion
          content:
            application/json:
              schema:
                type: object
              example:
                cookies:
                  theme: "dark"

  /image:
    get:
      summary: Returns an image response
      description: Returns an image in various formats based on the Accept header
      produces:
        - image/png
        - image/jpeg
        - image/webp
        - image/svg+xml
      tags:
        - Images
      responses:
        "200":
          description: Image Response
          content:
            image/png:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/webp:
              schema:
                type: string
                format: binary
            image/svg+xml:
              schema:
                type: string
                format: binary
            image/gif:
              schema:
                type: string
                format: binary
  /image/jpeg:
    get:
      summary: Returns a JPEG image
      tags:
        - Images
      responses:
        "200":
          description: A JPEG image
  /image/png:
    get:
      summary: Returns a PNG image
      tags:
        - Images
      responses:
        "200":
          description: A PNG image
  /image/webp:
    get:
      summary: Returns a WEBP image
      tags:
        - Images
      responses:
        "200":
          description: A WEBP image
  /image/svg:
    get:  
      summary: Returns an SVG image
      tags:
        - Images
      responses:
        "200":
          description: An SVG image
  /image/gif:
    get:
      summary: Returns a GIF image
      tags:
        - Images
      responses:
        "200":
          description: A GIF image
          